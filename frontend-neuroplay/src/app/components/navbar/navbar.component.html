<nav class="bg-white shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
      <!-- Logo y marca -->
      <div class="flex-shrink-0 flex items-center">
        <a [routerLink]="['/paciente']" class="flex items-center">
          <img class="h-8 w-auto" src="/assets/logo.png" alt="Logo" />
          <span class="ml-2 text-xl font-semibold text-gray-800 hidden md:block"
            >Neuroplay</span
          >
        </a>
      </div>

      <!-- Menú de usuario -->
      <div *ngIf="isLoggedIn" class="flex items-center space-x-4">
        <!-- Mostrar rol si es necesario -->
        <div
          *ngIf="userRole"
          class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full"
        >
          {{ userRole }}
        </div>

        <!-- Mensaje de bienvenida -->
        <div class="text-sm font-medium text-gray-700">
          ¡Bienvenido, {{ nombre || "Usuario" }}!
        </div>

        <div class="relative">
          <!-- Avatar del usuario -->
          <div class="relative" (click)="toggleMenu()" #menuButton>
            <div
              class="h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center cursor-pointer"
            >
              <span class="text-indigo-600 font-medium">
                {{ getInitials(nombre || "Usuario") }}
              </span>
            </div>
          </div>

          <!-- Menú desplegable controlado por Angular -->
          <div
            *ngIf="menuAbierto"
            class="absolute right-3 top-8 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200"
            #menuContent
          >
            <a
              [routerLink]="['/perfil', userId]"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              (click)="cerrarMenu()"
            >
              Mi perfil
            </a>
            <div class="border-t border-gray-200"></div>
            <button
              (click)="logout(); cerrarMenu()"
              class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            >
              Cerrar sesión
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
